{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block app_content %}
<h1>Controller</h1>
<form class="form form-horizontal" method="post" role="form">
    <div class="row">
        <div class="col-md-5">
            {{ form.hidden_tag() }}

            {% if endpoints %}
            {% for endpoint in endpoints %}
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        {{ endpoint[1] }}
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="control-group">
                                <select name="select-{{ endpoint[0] }}" class="form-control">
                                    {% if channels %}
                                    {% for channel in channels %}
                                    <option value="{{ channel[0] }}">{{ channel[1] }} ({{ channel[2] }})</option>
                                    {% endfor %}
                                    {% endif %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-12">
                            <input type="submit" class="btn btn-default" value="Play" name="play-{{ endpoint[0] }}">
                            <input type="submit" class="btn btn-default" value="Pause" name="pause-{{ endpoint[0] }}">
                            <input type="submit" class="btn btn-default" value="Stop" name="stop-{{ endpoint[0] }}">
                            <input type="submit" class="btn btn-default" value="Skip" name="skip-{{ endpoint[0] }}">
                            <input type="submit" class="btn btn-default" value="Set Channel" name="chan-{{ endpoint[0] }}">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-12">
                            UUID: {{ endpoint[0] }}<br>
                            State: {{ endpoint[2] }}<br>
                            Next: {{ endpoint[3] }}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <p>
                No Endpoints appear to be active.
            </p>
            <p>
                Please verify your RaspberryPi is configured and successfully connecting.
            </p>
            <p>
                Once you have at least one endpoint configured and active, refresh this
                page. The list of active endpoints will automatically populate.
            </p>
            {% endif %}
        </div>
    </div>
</form>
{% endblock %}
